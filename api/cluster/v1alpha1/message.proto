syntax = "proto3";

package cluster.v1alpha1;

option go_package = "api/cluster/v1alpha1;v1alpha1";


message ClusterArgs {
    int64 id = 1 [json_name = "id"];
    string name = 2 [json_name = "name"];
    string type = 3 [json_name = "type"];
    string public_key = 4 [json_name = "public_key"];
    string region = 5 [json_name = "region"];
    string access_key_id = 6 [json_name = "access_key_id"];
    string secret_access_key = 7 [json_name = "secret_access_key"];
    repeated NodeArgs nodes = 8 [json_name = "nodes"];
    int64 node_id = 9 [json_name = "node_id"];
}

message NodeArgs {
    string ip = 1 [json_name = "ip"];
    string user = 2 [json_name = "user"];
    string role = 3 [json_name = "role"];
    int64 id = 4 [json_name = "id"];
}

message ClusterList {
    repeated Cluster clusters = 1 [json_name = "clusters"];
}

message Cluster {
    int64 id = 1 [json_name = "id"];
    string name = 2 [json_name = "name"];
    string cloud_id = 3 [json_name = "cloud_id"];
    string connections = 4 [json_name = "connections"];
    string certificate_authority = 5 [json_name = "certificate_authority"];
    string version = 6 [json_name = "version"];
    string api_server_address = 7 [json_name = "api_server_address"];
    string config = 8 [json_name = "config"];
    string addons = 9 [json_name = "addons"];
    string addons_config = 10 [json_name = "addons_config"];
    uint32 status = 11 [json_name = "status"];
    string type = 12 [json_name = "type"];
    string kube_config = 13 [json_name = "kube_config"];
    string key_pair = 14 [json_name = "key_pair"];
    string public_key = 15 [json_name = "public_key"];
    string private_key = 16 [json_name = "private_key"];
    string region = 17 [json_name = "region"];
    string vpc_id = 18 [json_name = "vpc_id"];
    string vpc_cidr = 19 [json_name = "vpc_cidr"];
    string eip_id = 20 [json_name = "eip_id"];
    string nat_gateway_id = 21 [json_name = "nat_gateway_id"];
    string resource_group_id = 22 [json_name = "resource_group_id"];
    string security_group_ids = 23 [json_name = "security_group_ids"];
    string external_ip = 24 [json_name = "external_ip"];
    string access_id = 25 [json_name = "access_id"];
    string access_key = 26 [json_name = "access_key"];
    string load_balancer_id = 27 [json_name = "load_balancer_id"];
    repeated Node nodes = 28 [json_name = "nodes"];
    repeated NodeGroup node_groups = 29 [json_name = "node_groups"];
    BostionHost bostion_host = 30 [json_name = "bostion_host"];
}

message NodeGroup {
    string id = 1 [json_name = "id"];
    string name = 2 [json_name = "name"];
    string cloud_nodegroup_id = 3 [json_name = "cloud_nodegroup_id"];
    string type = 4 [json_name = "type"];
    string instance_type = 5 [json_name = "instance_type"];
    string image = 6 [json_name = "image"];
    string os = 7 [json_name = "os"];
    string arch = 8 [json_name = "arch"];
    int32 cpu = 9 [json_name = "cpu"];
    float memory = 10 [json_name = "memory"];
    int32 gpu = 11 [json_name = "gpu"];
    string node_init_script = 12 [json_name = "node_init_script"];
    int32 min_size = 13 [json_name = "min_size"];
    int32 max_size = 14 [json_name = "max_size"];
    int32 target_size = 15 [json_name = "target_size"];
    int32 system_disk = 16 [json_name = "system_disk"];
    int32 data_disk = 17 [json_name = "data_disk"];
    int64 cluster_id = 18 [json_name = "cluster_id"];
}


message Node {
    int64 id = 1 [json_name = "id"];
    string instance_id = 2 [json_name = "instance_id"];
    string name = 3 [json_name = "name"];
    string labels = 4 [json_name = "labels"];
    string kernel = 5 [json_name = "kernel"];
    string container_runtime = 6 [json_name = "container_runtime"];
    string kubelet = 7 [json_name = "kubelet"];
    string kube_proxy = 8 [json_name = "kube_proxy"];
    int32 ssh_port = 9 [json_name = "ssh_port"];
    string internal_ip = 10 [json_name = "internal_ip"];
    string external_ip = 11 [json_name = "external_ip"];
    string user = 12 [json_name = "user"];
    string role = 13 [json_name = "role"];
    string status = 14 [json_name = "status"];
    string error_info = 15 [json_name = "error_info"];
    string zone = 16 [json_name = "zone"];
    string subnet_id = 17 [json_name = "subnet_id"];
    string subnet_cidr = 18 [json_name = "subnet_cidr"];
    string public_key = 19 [json_name = "public_key"];
    string gpu_spec = 20 [json_name = "gpu_spec"];
    int32 system_disk = 21 [json_name = "system_disk"];
    int32 data_disk = 22 [json_name = "data_disk"];
    float node_price = 23 [json_name = "node_price"];
    float pod_price = 24 [json_name = "pod_price"];
    int32 internet_max_bandwidth_out = 25 [json_name = "internet_max_bandwidth_out"];
    int64 cluster_id = 26 [json_name = "cluster_id"];
    string node_group_id = 27 [json_name = "node_group_id"];
}


message BostionHost {
    int64 id = 1 [json_name = "id"];
    string instance_type = 2 [json_name = "instance_type"];
    string instance_id = 3 [json_name = "instance_id"];
    string user = 4 [json_name = "user"];
    string image_id = 5 [json_name = "image_id"];
    string image = 6 [json_name = "image"];
    string os = 7 [json_name = "os"];
    string arch = 8 [json_name = "arch"];
    string hostname = 9 [json_name = "hostname"];
    string external_ip = 10 [json_name = "external_ip"];
    string internal_ip = 11 [json_name = "internal_ip"];
    int32 ssh_port = 12 [json_name = "ssh_port"];
    string private_ip = 13 [json_name = "private_ip"];
    int64 cluster_id = 14 [json_name = "cluster_id"];
    int32 cpu = 15 [json_name = "cpu"];
    float memory = 16 [json_name = "memory"];
}


message CheckBostionHostRequest {
    string arch = 1 [json_name = "arch"];
    string ocean_version = 2 [json_name = "ocean_version"];
    string ship_version = 3 [json_name = "ship_version"];
    string ocean_data_tar_gz_package_path = 4 [json_name = "ocean_data_tar_gz_package_path"];
    string ocean_data_tar_gz_package_sha256sum_path = 5 [json_name = "ocean_data_tar_gz_package_sha256sum_path"];
    string ocean_path = 6 [json_name = "ocean_path"];
    string ship_path = 7 [json_name = "ship_path"];
}

message ClusterLogsRequest {
    int64 cluster_id = 1 [json_name = "cluster_id"];
    int32 tail_lines = 2 [json_name = "tail_lines"];
    string cluster_name = 3 [json_name = "cluster_name"];
}

message ClusterLogsResponse {
    string logs = 1 [json_name = "logs"];
}

message Regions {
    repeated string regions = 1 [json_name = "regions"];
}
